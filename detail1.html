<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#FF9500">
    <title>My Points Booking</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        html,
        body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333333;
            overflow: hidden;
            overflow-x: hidden;
        }
        
        .app-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        /* Header - Gradient cam */
        
        .header {
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 60px;
            background: linear-gradient(135deg, #FF9500 0%, #FF8C00 100%);
            flex-shrink: 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10;
        }
        /* Background gradient cam kéo xuống 1/3 */
        
        .invisible-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            opacity: 0;
            /* ẩn hoàn toàn */
            z-index: 999;
            /* vẫn nằm trên các lớp khác */
            background: transparent;
            /* không nền */
            border: none;
            cursor: pointer;
            width: 180px;
            /* vùng click tùy chỉnh */
            height: 40px;
        }
        
        .gradient-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 33.33%;
            background: url('backgroud.jpg') no-repeat top center;
            background-size: 100% auto;
            /* ✅ vừa khít chiều ngang, không tràn hai bên */
            z-index: 0;
            pointer-events: none;
        }
        
        .content-wrapper {
            position: relative;
            z-index: 1;
            padding: 5px;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .header-back {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }
        
        .header-title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .header-buttons {
            display: flex;
            align-items: center;
            border: 1px solid #ccc;
            /* nếu vẫn muốn viền sáng */
            border-radius: 900px;
            /* bo pill-shape */
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.5);
            /* nền chung mờ */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        /* Cứ để nút bên trong nền trong suốt để không chồng thêm */
        
        .header-buttons button {
            flex: 1;
            border: none;
            background: transparent;
            /* thay vì rgba(0,0,0,0.5) */
            padding: 2% 15px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: white;
        }
        /* Viền giữa hai nút */
        
        .header-buttons button:first-child {
            margin-top: 5px;
            margin-bottom: 5px;
            border-right: 1px solid #ccc;
        }
        /* Hover hiệu ứng */
        
        .header-buttons button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            /* kiểu sáng hơi mờ để hiệu ứng nhẹ */
            /* hoặc background-color: rgba(0,0,0,0.7); nếu muốn đậm hơn khi hover */
        }
        /* Main Content */
        
        .main-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            position: relative;
            z-index: 1;
        }
        /* Main Container - Tờ phiếu */
        
        .main-container {
            background: white;
            border-radius: 20px;
            margin-top: 50px;
            padding: 30px 24px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        /* QR Section */
        
        .qr-section {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .qr-title {
            font-size: 13px;
            color: #333333;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .qr-subtitle {
            font-size: 12px;
            color: #999999;
            margin-bottom: 16px;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            background: #f5f5f5;
            margin: 0 auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999999;
            font-size: 12px;
        }
        
        .qr-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* Giữ nguyên tỉ lệ, không méo ảnh */
            border-radius: 8px;
            /* Bo tròn giống khung QR */
        }
        /* Queue Number Section */
        
        .queue-section {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .queue-label {
            font-size: 15px;
            color: #161616;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .queue-number {
            font-size: 40px;
            font-weight: 700;
            color: #1da54f;
            line-height: 1;
        }
        /* Info Box */
        
        .info-box {
            background: #FFF3CC;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            border: 2px solid #FFE4B5;
            /* đậm hơn nhờ dày hơn */
        }
        
        .info-box2 {
            background: #f8f6f6;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 30px;
            border: 1px solid #eeebeb;
        }
        
        .info-icon-img {
            width: 15px;
            height: 15px;
            object-fit: contain;
            flex-shrink: 0;
        }
        
        .info-icon-img1 {
            width: 20px;
            height: 20px;
            object-fit: contain;
            flex-shrink: 0;
        }
        
        .info-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 5px;
        }
        
        .info-item:last-child {
            margin-bottom: 0;
        }
        
        .info-icon {
            font-size: 16px;
            width: 24px;
            /* cố định chỗ cho icon */
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .info-content {
            flex: 1;
        }
        
        .bullet {
            color: #141414;
            /* màu cam thương hiệu */
            font-size: 18px;
            /* to hơn một chút */
            margin-right: 10px;
            /* cách chữ xa hơn */
            vertical-align: middle;
        }
        
        .info-label {
            font-size: 13px;
            color: #999999;
            margin-bottom: 2px;
        }
        
        .info-value {
            font-size: 15px;
            color: #333333;
            font-weight: 700;
            line-height: 1.4;
            margin-left: -21px;
        }
        
        .info-address {
            font-size: 13px;
            color: #333;
            line-height: 1.4;
            margin-left: -21px;
            /* lùi vào đúng vị trí thẳng hàng chữ "Cửa hàng" */
        }
        /* Dashed Divider - Tờ phiếu */
        /* ======= PHẦN ĐƯỜNG XÉ (CHỖ LÕM) ======= */
        
        .dashed-divider {
            position: relative;
            margin: 15px 0;
            height: 1px;
            border-top: 2px dashed #ccc;
        }
        /* Hai chỗ lõm tròn ở hai bên */
        
        .dashed-divider::before,
        .dashed-divider::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 32px;
            height: 32px;
            background: #f5f5f5;
            /* cùng màu nền ngoài phiếu */
            border-radius: 50%;
            transform: translateY(-50%);
            z-index: 2;
        }
        
        .dashed-divider::before {
            left: -38px;
            /* nửa kích thước để lõm đều */
        }
        
        .dashed-divider::after {
            right: -38px;
        }
        /* Check-in Time Section */
        
        .checkin-section {
            text-align: center;
            margin-top: 5px;
        }
        
        .checkin-title {
            font-size: 13px;
            color: #FF0000;
            font-weight: 700;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .checkin-time {
            font-size: 13px;
            color: #FF0000;
            font-weight: 700;
        }
        /* User Section */
        
        .user-section {
            background: white;
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .user-item {
            margin-bottom: 10px;
        }
        
        .user-item:last-child {
            margin-bottom: 0;
        }
        
        .user-label {
            font-size: 14px;
            color: #999999;
            margin-bottom: 4px;
        }
        
        .user-value {
            font-size: 15px;
            color: #333333;
            font-weight: 550;
        }
        /* Terms Section */
        
        .terms-section {
            background: white;
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .terms-title {
            font-size: 14px;
            color: #333333;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .terms-content {
            font-size: 15px;
            color: #141414;
            line-height: 1.6;
        }
        
        .terms-link {
            color: #333333;
            text-decoration: underline;
            /* thêm gạch dưới */
            font-weight: 700;
        }
        
        .expand-btn {
            color: #FF9500;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
            display: block;
            /* biến nút thành phần tử khối */
            margin-left: auto;
            /* căn giữa */
            margin-right: auto;
            /* căn giữa */
            text-align: center;
            /* đảm bảo nội dung trong nút cũng giữa */
        }
        /* Booking History Button */
        
        .booking-btn {
            background: white;
            border: 2px solid #FF9500;
            color: #FF9500;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .booking-btn:active {
            background: #FFF8E7;
        }
        
        .terms-extra {
            display: none;
            /* Ẩn mặc định */
            font-size: 14px;
            color: #141414;
            line-height: 1.6;
            animation: fadeIn 0.3s ease;
        }
        
        .terms-extra ul {
            padding-left: 16px;
            /* canh lề danh sách */
        }
        
        .lang-divider {
            border: none;
            border-top: 1px solid #999;
            /* nét liền, rõ ràng hơn */
            margin: 16px 0;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Responsive */
        
        @media (max-width: 600px) {
            .queue-number {
                font-size: 30px;
            }
            .qr-code {
                width: 200px;
                height: 200px;
            }
            .main-content {
                padding: 5px;
            }
            .main-container {
                padding: 24px 20px;
            }
        }
        /* Safe area for notch */
        
        @supports (padding: max(0px)) {
            .header {
                padding-left: max(16px, env(safe-area-inset-left));
                padding-right: max(16px, env(safe-area-inset-right));
            }
        }
    </style>
</head>

<body>
    <div id="app-container" class="app-container">
        <!-- <div class="header">
            <div class="header-content"> <button class="header-back" onclick="goBack()">‹</button>
                <div class="header-title">My Points Booking</div>
            </div>
            <div class="header-buttons"> <button onclick="toggleMenu()" title="Menu">⋯</button> <button onclick="exitApp()" title="Thoát">✕</button> </div>
        </div> -->
        <div class="main-content">
            <button class="top-left-btn invisible-btn" id="hidden-btn">← Quay lại</button>
            <div class="gradient-background"></div>
            <div class="content-wrapper">
                <!-- Main Container - Tờ phiếu -->
                <div class="main-container">
                    <!-- QR Code Section -->
                    <div class="qr-section">
                        <div class="qr-title">Mã QR check-in của bạn</div>
                        <div class="qr-title">(Your check-in QR)</div>
                        <div class="qr-code" id="qrcode"> <img src="QR20.jpg" alt="QR Code" class="qr-image"></div>
                    </div>
                    <!-- Queue Number Section -->
                    <div class="queue-section">
                        <div class="queue-label">Số thứ tự của bạn là (Your queue number):</div>
                        <div class="queue-number">#20</div>
                    </div>
                    <!-- Info Box -->
                    <div class="info-box">
                        <div class="info-item">
                            <div class="info-icon-label"><img src="cuahang.jpg" alt="Cửa hàng" class="info-icon-img"></div>
                            <div class="info-subcontent">
                                <div class="info-label">Cửa hàng (Store)</div>
                                <div class="info-value">POP MART AEON MALL HÀ ĐÔNG</div>
                                <div class="info-address">1F, TTTM AEON MALL HÀ ĐÔNG</div>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon-label"><img src="dongho.jpg" alt="Cửa hàng" class="info-icon-img"></div>
                            <div class="info-content">
                                <div class="info-label">Thời gian dự kiến (Estimate Time)</div>
                                <div class="info-value">Thứ 2 - 10/11/2025 từ 09:00 đến 12:00</div>
                            </div>
                        </div>
                    </div>
                    <!-- Dashed Divider - Tờ phiếu -- <!-- Check-in Time Section -->
                    <div class="checkin-section">
                        <div class="checkin-title">
                            <div class="info-icon-label"><img src="thoigian.jpg" alt="Cửa hàng" class="info-icon-img1"></div>Thời gian check-in (Check-in Time) </div>
                        <div class="checkin-time">09:00 10/11/2025 - 12:00 10/11/2025</div>
                    </div>
                    <div class="dashed-divider"></div>
                    <!-- User Section -->
                    <div class="info-box2">
                        <div class="user-item">
                            <div class="user-label">Họ và tên (Full name)</div>
                            <div class="user-value">Nguyễn Quốc Anh</div>
                        </div>
                        <div class="user-item">
                            <div class="user-label">Số điện thoại (Phone)</div>
                            <div class="user-value">0905196653</div>
                        </div>
                        <div class="user-item">
                            <div class="user-label">CCCD/Passport (Passport ID)</div>
                            <div class="user-value">030099012720</div>
                        </div>
                        <div class="user-item">
                            <div class="user-label">Email</div>
                            <div class="user-value">nghiaprsv1@gmail.com</div>
                        </div>
                    </div>
                    <!-- Terms Section -->
                    <div class="terms-section">
                        <div class="terms-title">Điều khoản sử dụng (Terms and Conditions)</div>
                        <div class="terms-content"><span class="bullet">•</span>Khung giờ xếp hàng dự kiến: <span class="terms-link">BẤM ĐỂ XEM CHI TIẾT</span> </div>
                        <div class="terms-extra">
                            <ul>
                                <li>QR code dùng để vào cổng sự kiện</li>
                                <li>QR không có giá trị chuyển nhượng dưới mọi hình thức</li>
                                <li>Mỗi QR chỉ áp dụng cho 1 khách hàng tham dự </li>
                                <li>BTC từ chối giải quyết trường hợp có nhiều hơn một người check in cùng một mã vé</li>
                                <li>BTC sẽ chặn quyền truy cập và hủy kết quả đăng ký đối với các tài khoản có dấu hiệu gian lận.</li>
                            </ul>
                            <hr class="lang-divider">
                            <ul>
                                <li>Estimated queue time: CLICK TO SEE DETAILS</li>
                                <li>QR code is used to enter the event gate</li>
                                <li>QR is not transferable in any form </li>
                                <li>Each QR is only applicable to 1 attending customer</li>
                                <li>The Organizing Committee refuses to resolve cases where more than one person checks in with the same ticket code</li>
                                <li>The Organizing Committee will block access and cancel registration results for any accounts suspected of fraudulent activity.</li>
                            </ul>
                        </div> <button class="expand-btn" onclick="toggleTerms()">Xem thêm ▼</button> </div>
                </div>
                <!-- Booking History Button --><button class="booking-btn">Lịch sử đăng ký (Booking History)</button> </div>
        </div>
    </div>
    <script>
        function goBack() {
            window.location.href = 'index.html';
        }
        document.getElementById('hidden-btn').addEventListener('click', () => {
            let url = '';

            // Xác định file chi tiết tương ứng
            url = 'index.html';


            // Fetch nội dung file chi tiết
            fetch(url)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');

                    const app = document.getElementById('app-container');
                    if (!app) {
                        console.error('Không tìm thấy #app-container để chèn nội dung!');
                        return;
                    }

                    // ✅ NẠP CSS
                    const head = document.head;
                    const cssNodes = doc.querySelectorAll('link[rel="stylesheet"], style');
                    cssNodes.forEach(node => {
                        // Kiểm tra xem CSS này đã được nạp chưa
                        if (node.tagName === 'LINK') {
                            const href = node.getAttribute('href');
                            const exists = Array.from(document.querySelectorAll('link[rel="stylesheet"]'))
                                .some(l => l.getAttribute('href') === href);
                            if (!exists) head.appendChild(node.cloneNode(true));
                        } else if (node.tagName === 'STYLE') {
                            head.appendChild(node.cloneNode(true));
                        }
                    });

                    // ✅ NẠP HTML (nội dung body của trang chi tiết)
                    app.innerHTML = doc.body.innerHTML;

                    // ✅ NẠP SCRIPT (cả có src và inline)
                    const scripts = doc.querySelectorAll('script');
                    scripts.forEach(script => {
                        const newScript = document.createElement('script');
                        if (script.src) {
                            // Script có src
                            newScript.src = script.src;
                        } else {
                            // Script inline
                            newScript.textContent = script.textContent;
                        }
                        document.body.appendChild(newScript);
                    });
                })
                .catch(err => {
                    console.error('Không tải được nội dung chi tiết:', err);
                });
        });

        function toggleMenu() {
            alert('Menu');
        }

        function exitApp() {
            if (confirm('Bạn có chắc chắn muốn thoát?')) {
                window.close();
            }
        }

        function toggleTerms() {
            const extra = document.querySelector('.terms-extra');
            const btn = document.querySelector('.expand-btn');
            if (extra.style.display === 'block') {
                extra.style.display = 'none';
                btn.textContent = 'Xem thêm ▼';
            } else {
                extra.style.display = 'block';
                btn.textContent = 'Thu gọn ▲';
            }
        }
    </script>
</body>

</html>
